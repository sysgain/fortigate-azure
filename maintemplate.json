{
    "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "adminUsername": {
            "type": "string",
            "defaultValue": "",
            "metadata": {
                "description": "Username for fortigate Virtual Machine, make a note of the Username this will be used further"
            }
        },
        "adminPassword": {
            "type": "securestring",
            "defaultValue": "",
            "metadata": {
                "description": "Password for fortigate Virtual Machine,make a note of the Password this will be used further."
            }
        },
        "principalId":{
            "type": "securestring",
            "defaultValue": "",
            "metadata": {
                "description": "Provide the object id of the logged in user/A user with owner permissions."
            }
        },
        "roleNameGuid":{
            "type": "string",
            "defaultValue": "",
            "metadata": {
                "description": "Provide the guid prefix for the runbook job to be created. Generate using https://www.guidgenerator.com/online-guid-generator.aspx"
            }
        },
        "roleNameGuid1":{
            "type": "string",
            "defaultValue": "",
            "metadata": {
                "description": "Provide the guid prefix for the runbook job to be created. Generate using https://www.guidgenerator.com/online-guid-generator.aspx"
            }
        },
        "fortigateVMSize": {
            "type": "string",
            "defaultValue": "Standard_F1",
            "allowedValues": [
                "Standard_F1",
                "Standard_F16s",
                "Standard_F1s",
                "Standard_F2",
                "Standard_F2s",
                "Standard_F4",
                "Standard_F4s",
                "Standard_F8",
                "Standard_F8s"
            ],
            "metadata": {
                "description": "Fortigate Virtual Machine size(If you select any other size than the default one the cost will be more)"
            }
        },
        "clientID":{
            "type": "string",
            "defaultValue": "",
            "metadata": {
                "description":"Provide application ID of the service principle which crated earlier"
            }
        },
        "ClientSecret":{
            "type": "securestring",
            "defaultValue": "",
            "metadata": {
                "description":"Provide password of the service principle"
            }
        },
        "ExistingspokeVNet":{
            "type": "string",
            "defaultValue": "",
            "allowedValues": [
                "Yes",
                "No"
            ]
        },
        "existingVnetName":{
            "type": "string",
            "defaultValue": "NA",
            "metadata": {
                "description":"If you choose ExistingspokeVNet as YES, then provide the name of the existing VNet.Otherwise keep the default value as it is"
            }
        },
        "existingSubnetName":{
            "type": "string",
            "defaultValue": "NA",
            "metadata": {
                "description":"If you choose ExistingspokeVNet as YES, then provide the name of the eisting Subnet.Otherwise keep the default value as it is"
            }
        },
        "existingSubnetPrefix":{
            "type": "string",
            "defaultValue": "NA",
            "metadata": {
                "description":"If you choose ExistingspokeVNet as YES, then provide the Address prefix of the existing subnet.Otherwise keep the default value as it is"
            }
        },
        "fabricConnectorWorkloadAddressName":{
            "type": "string",
            "defaultValue": "testip",
            "metadata": {
                "description":"Provide the name of the fabric connector address"
            }
        },
        "fabricConnectorFirewallAddressName":{
            "type": "string",
            "defaultValue": "firewallip",
            "metadata": {
                "description":"Provide the name of teh FortiGate firewall address name"
            }
        },
        "hubFotigateVNetCIDR":{
            "type": "string",
            "defaultValue": "10.0.0.0/16",
            "metadata": {
                "description":"Provide the CIDR address for FortiGate vnet(Hub vnet)"
            }
        },
        "FortiGatePublicFacingSubnetCIDR":{
            "type": "string",
            "defaultValue": "10.0.0.0/24",
            "metadata": {
                "description":"Provide the CIDR address for FortiGate public facing subnet"
            }
        },
        "FortiGateInsideSubnetCIDR":{
            "type": "string",
            "defaultValue": "10.0.1.0/24",
            "metadata": {
                "description":"Provide the CIDR address for FortiGate internal(private facing) subnet"
            }
        },
        "FortiGatePublicFacingSubnetAddress":{
            "type": "string",
            "defaultValue": "10.0.0.4",
            "metadata": {
                "description":"Provide the static address of public facing subnet"
            }
        },
        "FortiGateInsideSubnetAddress":{
            "type": "string",
            "defaultValue": "10.0.1.4",
            "metadata": {
                "description":"Provide the statis address of internal(private facing) subnet"
            }
        },
        "spokeDemoVnetCIDR":{
            "type": "string",
            "defaultValue": "172.1.0.0/16",
            "metadata": {
                "description":"Provide the CIDR address for Demo vnet(spoke)"
            }
        },
        "spokeDemoSubnetCIDR1":{
            "type": "string",
            "defaultValue": "172.1.0.0/24",
            "metadata": {
                "description":"provide the CIDR address for Demo subnet1(spoke1)"
            }
        },
        "spokeDemoSubnetCIDR2":{
            "type": "string",
            "defaultValue": "172.1.1.0/24",
            "metadata": {
                "description":"Provide the CIDR address for Demo subnet2(spoke2)"
            }
        }
    },
    "variables": {
        "apiVersions": {
            "deploymentApiVersion": "2016-02-01",
            "computeApiVersion": "2018-06-01",
            "networkApiVersion": "2017-09-01",
            "routtableApiVersion": "2015-06-15"
        },
        "networkSettings": {
            "location": "[variables('location')]",
            "networkApiVersion": "2016-03-30",
            "virtualNetworkName": "[concat('ForiGateVNET',variables('suffix'))]",
            "addressPrefix": "[parameters('hubFotigateVNetCIDR')]",
            "subnet1Name": "[concat('PublicFacingSubnet',variables('suffix'))]",
            "subnet1Prefix": "[parameters('FortiGatePublicFacingSubnetCIDR')]",
            "subnet2Name": "[concat('InternalSubnet',variables('suffix'))]",
            "subnet2Prefix": "[parameters('FortiGateInsideSubnetCIDR')]"
        },
        "wlNetworkSettings": {
            "location": "[variables('location')]",
            "networkApiVersion": "2016-03-30",
            "virtualNetworkName": "[concat('workLoadsVNET',variables('suffix'))]",
            "addressPrefix": "[parameters('spokeDemoVnetCIDR')]",
            "subnetName1": "[concat('wlSubnet1',variables('suffix'))]",
            "subnetName2": "[concat('wlSubnet2',variables('suffix'))]",
            "subnetPrefix1": "[parameters('spokeDemoSubnetCIDR1')]",
            "subnetPrefix2": "[parameters('spokeDemoSubnetCIDR2')]"
        },
        "fortigateFirewallSettings": {
            "location": "[variables('location')]",
            "fortiAvailName": "[concat('forti-avset',variables('suffix'))]",
            "FGPubFacingAddress": "[parameters('FortiGatePublicFacingSubnetAddress')]",
            "FGDMZAddress": "[parameters('FortiGateInsideSubnetAddress')]",
            "fortiPublicIPAddressName": "[concat('forti-pip',variables('suffix'))]",
            "publicIPAddressType": "Dynamic",
            "FortiGateName": "[concat('fortigateVM',variables('suffix'))]",
            "fortiNicName1": "[concat('forti-nic-1',variables('suffix'))]",
            "fortiNicName2": "[concat('forti-nic-2',variables('suffix'))]",
            "sku": "fortinet_fg-vm_payg",
            "version": "6.0.4",
            "product": "fortinet_fortigate-vm_v5",
            "publisher": "fortinet",
            "fortigateVMSize": "[parameters('fortigateVMSize')]",
            "storageAccountType": "Standard_LRS",
            "adminUsername": "[parameters('adminUsername')]",
            "adminPassword": "[parameters('adminPassword')]",
            "fortiDnsLabelPrefix": "[concat('fortigate',variables('suffix'))]",
            "routeTable1Name": "[concat('fortigate', '-', variables('networkSettings').subnet1Name,'-routes')]",
            "routeTable2Name": "[concat('fortigate', '-', variables('networkSettings').subnet2Name,'-routes')]",
            "networkSecurityGroupName":"[concat('fortigatensg',variables('suffix'))]",
            "userData": "[concat('config system sdn-connector \n edit \"fg-azure-sdn\" \n set status enable \n set type azure \n set tenant-id \"',subscription().tenantId,'\" \n set subscription-id \"',subscription().subscriptionId,'\" \n set client-id \"',parameters('clientID'),'\" \n set client-secret \"',parameters('clientSecret'),'\" \n set resource-group \"', variables('rgName'),'\" \n set azure-region global \n set update-interval 60 \n end \n config firewall address \n edit \"',parameters('fabricConnectorWorkloadAddressName'),'\" \n set type dynamic \n set comment ','',' \n set visibility enable \n set associated-interface ','', '\n set color 0 \n set sdn azure \n set filter \"tag.displayName=web\" \n next \n end \n config firewall address \n edit \"',parameters('fabricConnectorFirewallAddressName'),'\" \n set type dynamic \n set comment ','',' \n set visibility enable \n set associated-interface ','', '\n set color 0 \n set sdn azure \n set filter \"tag.displayName=firewall\" \n next \n end \n config firewall policy \n edit 0 \n set name \"outbound\" \n set srcintf \"port2\" \n set dstintf \"port1\" \n set srcaddr \"all\" \n set dstaddr \"all\" \n set action accept \n set schedule \"always\" \n set service \"ALL\" \n set nat enable \n next \n end \n config firewall vip \n edit ssh-wl \n set extintf \"port1\" \n set extip \"',parameters('FortiGatePublicFacingSubnetAddress'),'\" \n set mappedip \"172.1.0.4\" \n set portforward enable \n set protocol tcp \n set extport 2222 \n set mappedport 22 \n end \n config firewall vip \n edit web-ip \n set extintf \"port1\" \n set extip \"',parameters('FortiGatePublicFacingSubnetAddress'),'\" \n set mappedip \"172.1.0.4\" \n set portforward enable \n set protocol tcp \n set extport 8888 \n set mappedport 8888 \n end \n config firewall policy \n edit 0 \n set name \"ssh-workload-policy\" \n set srcintf \"port1\" \n set dstintf \"port1\" \n set srcaddr \"all\" \n set dstaddr \"ssh-wl\" \n set action accept \n set schedule \"always\" \n set service \"ALL\" \n set logtraffic all \n set nat enable \n next \n end \n config firewall policy \n edit 0 \n set name \"web-policy\" \n set srcintf \"port1\" \n set dstintf \"port1\" \n set srcaddr \"all\" \n set dstaddr \"web-ip\" \n set action accept \n set schedule \"always\" \n set service \"ALL\" \n set logtraffic all \n set nat enable \n next \n end \n config firewall policy \n edit 0 \n set name \"internet-inbound-policy\" \n set srcintf \"port1\" \n set dstintf \"port1\" \n set srcaddr \"all\" \n set dstaddr \"all\" \n set action accept \n set schedule \"always\" \n set service \"ALL\" \n set logtraffic all \n set nat enable \n next \n end \n config firewall DoS-policy \n edit 0 \n set status disable \n set interface \"port1\" \n set srcaddr all \n set dstaddr \"testip\" \n set service ALL \n config anomaly \n edit \"tcp_syn_flood\" \n set status disable \n set log enable \n set action block \n set threshold 300 \n next \n end \n end \n config firewall policy \n edit 0 \n set name \"blocking-url-policy\" \n set srcintf \"port1\" \n set dstintf \"port1\" \n set srcaddr \"',parameters('fabricConnectorWorkloadAddressName'),'\" \n set dstaddr \"all\" \n set action accept \n set schedule \"always\" \n set service \"ALL\" \n set logtraffic securityevents \n set webfilter-profile \"default\" \n set profile-protocol-options \"default\" \n set ssl-ssh-profile \"certificate-inspection\" \n set nat enable \n set status disable \n next \n end')]"
         },
        "workloadsSettings": {
            "location": "[variables('location')]",
            "virtualMachineName1": "[concat('workloadVM-1',variables('suffix'))]",
            "virtualMachineName2": "[concat('workloadVM-2',variables('suffix'))]",
            "publicIPdnsPrefix": "[concat('workloadpip',variables('suffix'))]",
            "adminUsername": "[parameters('adminUsername')]",
            "adminPassword": "[parameters('adminPassword')]",
            "nicName1": "[concat('wl-nic-1',variables('suffix'))]",
            "nicName2": "[concat('wl-nic-2',variables('suffix'))]",
            "networkSecurityGroupName": "[concat('workload-nsg',variables('suffix'))]",
            "publicIpAddressName": "[concat('workload-pip',variables('suffix'))]",
            "publicIpAddressType": "Static",
            "vmSize": "Standard_DS1_v2",
            "osPublisher": "Canonical",
            "osOffer": "UbuntuServer",
            "osSku": "16.04-LTS",
            "storageAccountType": "Standard_LRS",
            "routeTableName":"[concat('WorkloadRoute',variables('suffix'))]",
            "tenantID":"[subscription().tenantId]",
            "clientID":"[parameters('clientID')]",
            "ClientSecret":"[parameters('ClientSecret')]",
            "subscriptionID":"[subscription().subscriptionId]",
            "rgName":"[variables('rgName')]",
            "fileUri":"[concat(variables('baseUrl'),'scripts/fg-automate.sh?token=AE6YXAEOTUQ4RTICNJV2ROK45ULWG')]",
            "osDiskName1":"[concat('wlOsDisk-1',variables('suffix'))]",
            "osDiskName2":"[concat('wlOsDisk-2',variables('suffix'))]"
        },
        "EndUserVMSettings": {
            "vnetName": "[concat('enduserVNET',variables('suffix'))]",
            "subnetName": "[concat('endusersubnet',variables('suffix'))]",
            "addressPrefix": "10.5.0.0/16",
            "subnetPrefix": "10.5.1.0/24",
            "pipName": "[concat('enduserpip',variables('suffix'))]",
            "publicIPAddressType": "Dynamic",
            "nsgName":"[concat('endusernsg',variables('suffix'))]",
            "dnsLabelPrefix": "[concat('enduserdns',variables('suffix'))]",
            "location": "[variables('location')]",
            "nicName": "[concat('enduser-nic',variables('suffix'))]",
            "VmName": "[concat('enduserVM',variables('suffix'))]",
            "vmSize": "Standard_DS1_v2",
            "Username": "[parameters('adminUsername')]",
            "Password": "[parameters('adminPassword')]",
            "imagePublisher": "Canonical",
            "imageOffer": "UbuntuServer",
            "ubuntuOSVersion": "16.04-LTS",
            "fileUri":"[concat(variables('baseUrl'),'scripts/fg-python-script.sh?token=AE6YXAG2CKJA3DCGNMOHACK45UL2M')]",
            "fileUri1":"[concat(variables('baseUrl'),'scripts/fg-python-existing-script.sh?token=AE6YXAFI5NWCM5O3773POJ245UL4U')]"
        },        
        "location": "[resourceGroup().location]",
        "deploymentApiVersion": "2016-02-01",
        "suffix": "[substring(uniqueString(resourceGroup().id), 0, 5)]",
        "rgName":"[resourceGroup().name]",
        "baseUrl": "https://raw.githubusercontent.com/sysgain/fortigate-azure/master/"
    },
    "resources": [
        {
            "type": "Microsoft.Resources/deployments",
            "name": "RoleAssignment",
            "apiVersion": "[variables('deploymentApiVersion')]",
            "properties": {
                "mode": "Incremental",
                "templateLink": {
                    "uri": "[concat(variables('baseUrl'),'nested/role-assignment.json?token=AE7OLVJ7V6UD4LAUEXTW7F246E43G')]",
                    "contentVersion": "1.0.0.0"
                },
                "parameters": {
                    "principalId": {
                        "value": "[parameters('principalId')]"
                    },                 
                    "roleNameGuid": {
                        "value": "[parameters('roleNameGuid')]"
                    },                 
                    "roleNameGuid1": {
                        "value": "[parameters('roleNameGuid1')]"
                    }
                }
            }
        },
        {
            "type": "Microsoft.Resources/deployments",
            "name": "vnetPeeringExisting",
            "apiVersion": "[variables('deploymentApiVersion')]",
            "condition": "[equals(parameters('ExistingspokeVNet'),'Yes')]",
            "properties": {
                "mode": "Incremental",
                "templateLink": {
                    "uri": "[concat(variables('baseUrl'),'nested/vnetpeering-existing.json?token=AE6YXAFXZTEPOQGOBRGATWS45UMCK')]",
                    "contentVersion": "1.0.0.0"
                },
                "parameters": {
                    "networkSettings": {
                        "value": "[variables('networkSettings')]"
                    },                 
                    "fortigateFirewallSettings": {
                        "value": "[variables('fortigateFirewallSettings')]"
                    },
                    "apiVersions": {
                        "value": "[variables('apiVersions')]"
                    },
                    "workloadsSettings":{
                        "value":"[variables('workloadsSettings')]"
                    },
                    "existingVNetName":{
                        "value":"[parameters('existingVNetName')]"
                    }
                }
            }
        },
        {
            "type": "Microsoft.Resources/deployments",
            "name": "vnetPeeringNew",
            "apiVersion": "[variables('deploymentApiVersion')]",
            "condition": "[equals(parameters('ExistingspokeVNet'),'No')]",
            "properties": {
                "mode": "Incremental",
                "templateLink": {
                    "uri": "[concat(variables('baseUrl'),'nested/vnetpeering.json?token=AE6YXAGNBCEETVN74QJT6UC45UMEO')]",
                    "contentVersion": "1.0.0.0"
                },
                "parameters": {
                    "networkSettings": {
                        "value": "[variables('networkSettings')]"
                    },                 
                    "wlNetworkSettings": {
                        "value": "[variables('wlNetworkSettings')]"
                    },
                    "fortigateFirewallSettings": {
                        "value": "[variables('fortigateFirewallSettings')]"
                    },
                    "apiVersions": {
                        "value": "[variables('apiVersions')]"
                    },
                    "workloadsSettings":{
                        "value":"[variables('workloadsSettings')]"
                    }
                }
            }
        },
        {
            "type": "Microsoft.Resources/deployments",
            "name": "fortigateVM",
            "apiVersion": "[variables('deploymentApiVersion')]",
            "condition": "[equals(parameters('ExistingspokeVNet'),'Yes')]",
            "dependsOn": [
                "vnetpeeringExisting"
            ],
            "properties": {
                "mode": "Incremental",
                "templateLink": {
                    "uri": "[concat(variables('baseUrl'),'nested/fortigate.json?token=AE6YXAG5EURVJTGR7J7KSGC45UMHK')]",
                    "contentVersion": "1.0.0.0"
                },
                "parameters": {
                    "fortigateFirewallSettings": {
                        "value": "[variables('fortigateFirewallSettings')]"
                    },                 
                    "networkSettings": {
                        "value": "[variables('networkSettings')]"
                    },                 
                    "apiVersions": {
                        "value": "[variables('apiVersions')]"
                    }
                }
            }
        },
        {
            "type": "Microsoft.Resources/deployments",
            "name": "fortigateVM1",
            "apiVersion": "[variables('deploymentApiVersion')]",
            "condition": "[equals(parameters('ExistingspokeVNet'),'No')]",
            "dependsOn": [
                "vnetpeeringNew"
            ],
            "properties": {
                "mode": "Incremental",
                "templateLink": {
                    "uri": "[concat(variables('baseUrl'),'nested/fortigate.json?token=AE6YXAG5EURVJTGR7J7KSGC45UMHK')]",
                    "contentVersion": "1.0.0.0"
                },
                "parameters": {
                    "fortigateFirewallSettings": {
                        "value": "[variables('fortigateFirewallSettings')]"
                    },                 
                    "networkSettings": {
                        "value": "[variables('networkSettings')]"
                    },                 
                    "apiVersions": {
                        "value": "[variables('apiVersions')]"
                    }
                }
            }
        },
        {
            "type": "Microsoft.Resources/deployments",
            "name": "workloadVMExisting",
            "apiVersion": "[variables('deploymentApiVersion')]",
            "condition": "[equals(parameters('ExistingspokeVNet'),'Yes')]",
            "dependsOn": [
                "vnetpeeringExisting"
            ],
            "properties": {
                "mode": "Incremental",
                "templateLink": {
                    "uri": "[concat(variables('baseUrl'),'nested/wlvm-existing.json?token=AE6YXACPBKTMLXX4KHBCFTK45UMMY')]",
                    "contentVersion": "1.0.0.0"
                },
                "parameters": {
                    "workloadsSettings": {
                        "value": "[variables('workloadsSettings')]"
                    },   
                    "apiVersions": {
                        "value": "[variables('apiVersions')]"
                    },
                    "existingVNetName":{
                        "value":"[parameters('existingVNetName')]"
                    },
                    "existingSubnetName":{
                        "value":"[parameters('existingSubnetName')]"
                    },
                    "adminUsername":{
                        "value": "[parameters('adminUsername')]"
                    }
                }
            }
        },
        {
            "type": "Microsoft.Resources/deployments",
            "name": "workloadVMNew",
            "apiVersion": "[variables('deploymentApiVersion')]",
            "condition": "[equals(parameters('ExistingspokeVNet'),'No')]",
            "dependsOn": [
                "vnetpeeringNew"
            ],
            "properties": {
                "mode": "Incremental",
                "templateLink": {
                    "uri": "[concat(variables('baseUrl'),'nested/workload.json?token=AE6YXAFQIGSXKIVQWZVQBS245UMOU')]",
                    "contentVersion": "1.0.0.0"
                },
                "parameters": {
                    "workloadsSettings": {
                        "value": "[variables('workloadsSettings')]"
                    },   
                    "wlNetworkSettings": {
                        "value": "[variables('wlNetworkSettings')]"
                    },
                    "apiVersions": {
                        "value": "[variables('apiVersions')]"
                    },
                    "adminUsername":{
                        "value": "[parameters('adminUsername')]"
                    }
                }
            }
        },
        {
            "type": "Microsoft.Resources/deployments",
            "name": "EndUserVMExisting",
            "apiVersion": "[variables('deploymentApiVersion')]",
            "condition": "[equals(parameters('ExistingspokeVNet'),'Yes')]",
            "dependsOn": [
                "workloadVMExisting"
            ],
            "properties": {
                "mode": "Incremental",
                "templateLink": {
                    "uri": "[concat(variables('baseUrl'),'nested/EnduserVM-existing.json?token=AE6YXACNX2ICGXNRZKM3B4C45UMQ6')]",
                    "contentVersion": "1.0.0.0"
                },
                "parameters": {
                    "EndUserVMSettings":{
                        "value":"[variables('EndUserVMSettings')]"
                    },
                    "workloadsSettings": {
                        "value": "[variables('workloadsSettings')]"
                    },   
                    "existingVNetName":{
                        "value":"[parameters('existingVNetName')]"
                    },
                    "existingSubnetName":{
                        "value":"[parameters('existingSubnetName')]"
                    },
                    "existingSubnetPrefix":{
                        "value":"[parameters('existingSubnetPrefix')]"
                    },
                    "adminUsername":{
                        "value": "[parameters('adminUsername')]"
                    },
                    "clientID":{
                        "value": "[parameters('clientID')]"
                    },
                    "ClientSecret":{
                        "value": "[parameters('ClientSecret')]"
                    }   
                }
            }
        },
        {
            "type": "Microsoft.Resources/deployments",
            "name": "EndUserVMNew",
            "apiVersion": "[variables('deploymentApiVersion')]",
            "condition": "[equals(parameters('ExistingspokeVNet'),'No')]",
            "dependsOn": [
                "workloadVMNew"
            ],
            "properties": {
                "mode": "Incremental",
                "templateLink": {
                    "uri": "[concat(variables('baseUrl'),'nested/EnduserVM.json?token=AE6YXAGW5TGMMW2A5E5HUMK45UMSY')]",
                    "contentVersion": "1.0.0.0"
                },
                "parameters": {
                    "EndUserVMSettings":{
                        "value":"[variables('EndUserVMSettings')]"
                    },
                    "workloadsSettings": {
                        "value": "[variables('workloadsSettings')]"
                    },   
                    "wlNetworkSettings": {
                        "value": "[variables('wlNetworkSettings')]"
                    },
                    "adminUsername":{
                        "value": "[parameters('adminUsername')]"
                    },
                    "clientID":{
                        "value": "[parameters('clientID')]"
                    },
                    "ClientSecret":{
                        "value": "[parameters('ClientSecret')]"
                    }   
                }
            }
        }      
    ],
    "outputs": {
        "fortigateWebURL": { 
            "condition": "[equals(parameters('ExistingspokeVNet'),'Yes')]",
            "type": "string",
            "value": "[concat('https://',reference('fortigateVM').outputs.fortigateFQDN.value)]"
        },
        "fortigateWebURL1": {
            "condition": "[equals(parameters('ExistingspokeVNet'),'No')]",
            "type": "string",
            "value": "[concat('https://',reference('fortigateVM1').outputs.fortigateFQDN.value)]"
        },
        "webUIAdminUsername": {
            "type": "string",
            "value": "[parameters('adminUsername')]"
        },
        "webUIAdminPassword": {
            "type": "string",
            "value": "[parameters('adminPassword')]"
        },
        "VM'sUserName":{
            "type": "string",
            "value": "[parameters('adminUsername')]"
        },
        "VM'sPassword":{
            "type": "string",
            "value": "[parameters('adminPassword')]"
        },
        "EndUserVMPublicDNS":{
            "condition": "[equals(parameters('ExistingspokeVNet'),'Yes')]",
            "type": "string",
            "value": "[reference('EndUserVMExisting').outputs.enduserFQDN.value]"
        },
        "EndUserVMPublicDNS1":{
            "condition": "[equals(parameters('ExistingspokeVNet'),'No')]",
            "type": "string",
            "value": "[reference('EndUserVMNew').outputs.enduserFQDN.value]"
        },
        "resourceGroupName":{
            "type": "string",
            "value": "[resourceGroup().name]"
        },
        "FortigateNic-1-IPAddress":{
            "type": "string",
            "value": "[variables('fortigateFirewallSettings').FGPubFacingAddress]"
        },
        "WorkloadVMPrivateIPAddress":{
            "condition": "[equals(parameters('ExistingspokeVNet'),'Yes')]",
            "type": "string",
            "value": "[reference('workloadVMExisting').outputs.WorkloadVMPrivateIPAddress1.value]"
        },
        "WorkloadVMPrivateIPAddress1":{
            "condition": "[equals(parameters('ExistingspokeVNet'),'No')]",
            "type": "string",
            "value": "[reference('workloadVMNew').outputs.WorkloadVMPrivateIPAddress1.value]"
        },
        "WorkloadVMPrivateIPAddress2":{
            "condition": "[equals(parameters('ExistingspokeVNet'),'No')]",
            "type": "string",
            "value": "[reference('workloadVMNew').outputs.WorkloadVMPrivateIPAddress2.value]"
        }   
    }
}
